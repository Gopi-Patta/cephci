tests:
  - test:
      name: install ceph pre-requisites
      module: install_prereq.py
      abort-on-fail: True
  - test:
      name: ceph ansible install rhcs 3 stable
      module: test_ansible.py
      config:
        use_cdn: True
        build: '3.0'
      ansi_config:
        ceph_test: True
        ceph_origin: repository
        ceph_repository: rhcs
        ceph_repository_type: cdn
        ceph_rhcs_version: 3
        ceph_stable_release: luminous
        osd_scenario: lvm
        osd_auto_discovery: False
        containerized_deployment: True
        journal_size: 1024
        copy_admin_key: True
        ceph_conf_overrides:
          global:
            osd_pool_default_pg_num: 128
            osd_default_pool_size: 2
            osd_pool_default_pgp_num: 128
            mon_max_pg_per_osd: 4096
            mon_allow_pool_delete: True
        desc: test cluster container setup using ceph-ansible
        abort-on-fail: True
  - test:
      name: ceph ansible
      module: test_ansible_upgrade.py
      config:
        ansi_config:
          ceph_test: True
          ceph_origin: distro
          ceph_stable_release: nautilus
          ceph_repository: rhcs
          osd_scenario: lvm
          osd_auto_discovery: False
          ceph_stable: True
          ceph_stable_rh_storage: True
          copy_admin_key: true
          dashboard_enabled: False
          upgrade_ceph_packages: True
          ceph_rhcs_version: 4
          ceph_iscsi_config_dev: false
          containerized_deployment: True
          ceph_conf_overrides:
            global:
              osd_pool_default_pg_num: 128 
              osd_default_pool_size: 2
              osd_pool_default_pgp_num: 128
              mon_max_pg_per_osd: 4096
              mon_allow_pool_delete: true
      desc: Test Ceph-Ansible container rolling update - 3.x -> 4.x
      abort-on-fail: True
